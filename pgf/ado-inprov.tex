%% Slides for ".NET Programming" by Chunyu Wang <chunyu@hit.edu.cn> %%

\begin{tikzpicture}[rounded corners, font=\sffamily\scriptsize, >=stealth]
\draw[fill=yellow!30, fill opacity=.5] (0,1.3) rectangle (6,6);
\draw[fill=blue!20, fill opacity=.8] (.2,1.5) rectangle (2.5,4.5);
\draw[fill=blue!20, fill opacity=.8] (2.7,1.5) rectangle (5.8,5.8);
\draw (1.35,4.1) node {\bf Client} (4.25,5.4) node {\bf .NET Framework}
(4.25,5.1) node {\bf Data Provoder};
\draw[fill=red!20] (3.75,4.5) ellipse (.8cm and .3cm) node {Connection};
\draw[fill=red!20] (4.8,3.85) ellipse (.8cm and .3cm) node {Command};
\foreach \x/\y in {1/3.5, 1.2/3.3, 1.4/3.1}
  \filldraw (\x,\y) node[draw=black,fill=white,minimum height=.5cm,minimum width=.8cm] {};
\draw (1.4,3.1) node[minimum height=.5cm,minimum width=.8cm] (row) {Rows};
\draw (4,3.1)  node[ellipse,draw,fill=red!20] (datar) {DataReader};
\draw (1.25,2.2) node[ellipse,draw,fill=orange!20] (datas) {DataSet};
\draw (4.5,2.2)  node[ellipse,draw,fill=red!20] (dataa) {DataAdapter};
\draw[fill=blue!20] (7.5,2.3) ellipse (.5cm and .15cm);
\fill[sharp corners,blue!20] (7,2.3) rectangle (8,3);
\draw[fill=blue!20] (7.5,3) ellipse (.5cm and .15cm);
\draw (7,2.3) -- (7,3) (8,2.3) -- (8,3);
\draw (7.5,2.6) node {DBMS};

\draw[->] (datar.200) ..  controls +(210:.5cm) and +(-30:.5cm) .. (row.-45);
\draw[->] (dataa.200) ..  controls +(210:.8cm) and +(-30:.5cm) .. (datas.-30);
\draw[->] (7,2.7) -- (datar.east);
\draw[->] (7,2.4) -- (dataa.east);
\end{tikzpicture}
