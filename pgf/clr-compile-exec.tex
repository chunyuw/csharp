%% Slides for ".NET Programming" by Chunyu Wang <chunyu@hit.edu.cn> %% -*- coding: utf-8 -*-

\begin{tikzpicture}[rounded corners, >=stealth]
\tikzstyle{tnode}=[fill=red!30, text width=1.7cm, rounded corners,
minimum height=1.1cm, minimum width=1.7cm, anchor=south west, text centered]

\draw[dashed,fill=blue!20, fill opacity=.4] (.7, .5) rectangle +(8.4,1.8);
\draw[dashed,fill=blue!20, fill opacity=.4] (.7,2.5) rectangle +(8.4,1.9);

\only<2-| handout:1>{\draw (4.5,4.1) node {程序编译};
\draw (1,2.7) node[style=tnode] (aa) {程序源码} ;   
\draw (4,2.7) node[style=tnode] (bb) {编译器} ; 
\draw[->] (aa.east) -- (bb.west);
\draw (7,2.7) node[style=tnode] (cc) 
{\only<3-| handout:1>{\color<3| handout:0>{red}中间语言} \only<2| handout:0>{\small DLL/EXE}} ;
\draw[->] (bb.east) -- (cc.west);
}

\only<4-| handout:1>{
\draw (4.5,.8)  node {程序执行};

\draw (4,1)   node[style=tnode] (dd) {JIT编译器} ;
\draw (1,1)   node[style=tnode] (ee) {本地代码} ;   

\draw[->] (dd.west) -- (ee.east);
\draw[->] (cc.south) .. controls (cc.south|-dd.east) .. (dd.east);
}
\end{tikzpicture}
