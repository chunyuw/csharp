%% Slides for ".NET Programming" by Chunyu Wang <chunyu@hit.edu.cn> %% -*- coding: utf-8 -*-

\begin{tikzpicture}[rounded corners, font=\scriptsize, >=stealth]
\draw[fill=yellow!30, fill opacity=.5] (-1,.8) rectangle (6,6);
\draw[fill=blue!20, fill opacity=.8] (-.8,1) rectangle (2,4.5);
\draw[fill=blue!20, fill opacity=.8] (2.2,1) rectangle (5.8,5.8);
\draw (.6,4.1) node {\bf Client} 
      (4,5.4) node {\bf .NET Framework}
      (4,5.1) node {\bf Data Provoder};
\draw (3.3,4.5) node[inner xsep=0pt,fill=red!20,draw,ellipse]  (da) {DataAdapter};
\draw (4.5,3.5) node[inner xsep=0pt,fill=red!20,draw,ellipse]  (ic) {InsertCommand};
\draw (4.1,2.5) node[inner xsep=0pt,fill=red!20,draw,ellipse]  (uc) {UpdateCommand};
\draw (3.5,1.5) node[inner xsep=0pt,fill=red!20,draw,ellipse]  (dc) {DeleteCommand};

\draw[fill=blue!20] (7.5,2.3) ellipse (.5cm and .15cm);
\fill[sharp corners,blue!20] (7,2.3) rectangle (8,3);
\draw[fill=blue!20] (7.5,3) ellipse (.5cm and .15cm);
\draw (7,2.3) -- (7,3) (8,2.3) -- (8,3);
\draw (7.5,2.6) node {DBMS};

\draw (.6,2.45) circle (1.15cm);
\fill[white,sharp corners,shift={(-.15,1.95)}] (0,0) rectangle + (1.5,1);
\draw[xstep=.3cm,ystep=.2cm, sharp corners,shift={(-.15,1.95)}] (0,0) grid +(1.5,1);

\draw (.5,3.2) node {DataSet} (.5,1.7) node {DataTable};

\draw[->] (.6,2.45) ++(60:1.15cm) -- (da.190);
\draw[->,dashed] (da.270) -- (ic.170);
\draw[->,dashed] (da.240) -- (uc.165);
\draw[->,dashed] (da.220) -- (dc.170);

\draw[->] (ic.east) .. controls +(right:1cm) and +(120:.1cm) ..  (7,3);
\draw[->] (uc.east) .. controls +(right:1cm) and +(left:.1cm) ..  (7,2.5);
\draw[->] (dc.east) .. controls +(right:1cm) and +(210:.1cm) ..  (7,2.3);
\end{tikzpicture}
